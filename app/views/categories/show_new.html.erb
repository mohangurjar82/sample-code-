<% is_game = @category.title.match("Games") ||(@category.category && @category.category.title.match("Games")) ? true : false %>
<div class="container">
    <!--Featured Video Block 2-->
    <% if @category.categories.count > 0 %>
      <div class="cp-featured-block m60 cp-comedy-video">
          <div class="row">
              <div class="cp-heading-outer col-md-12">
                  <h2><%= @category.title %> Categories</h2>
                  <ul class="cp-listed">
                      <li class="view-all"><a href="#">View All</a>
                      </li>
                  </ul>
              </div>
            </div>
              <div class="featured-blocks categories-list">
                <div class="uk-slidenav-position" data-uk-slider="{infinite: false, slideItems: <%= slide_item_number %>}">
                  <div class="uk-slider-container" style="-webkit-overflow-scrolling: touch;">
                    <ul class="uk-slider uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4">
                      <% @category.categories.each do |m| %>
                        <li>
                          <div class="single-category-block">
                              <figure class="cp-thumb">
                                <% m = m.becomes(Game) if is_game %>
                                <% if m.thumbnail_url.present? %>
                                  <img alt="" src="<%= m.thumbnail_url %>">
                                <% else %>
                                  <img src="<%= asset_path('movie-placeholder.jpg') %>">
                                <% end %>
                                <figcaption class="cp-caption">
                                  <a class="play-video" href="/categories/<%= m.number %>">View <%= @category.title %> Category</a>

                                </figcaption>
                              </figure>
                          </div>
                        </li>
                      <% end %>
                    </ul>
                  </div>
                  <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous" data-uk-slider-item="previous"></a>
                  <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next" data-uk-slider-item="next"></a>
                </div>
              </div>
          </div>
    <% end %>
    <!--Featured Video Block 2 End-->
    <!--Outer Holder Start-->
    <% @category.categories.each do |cat| %>
        <div class="cp-outer-holder cp-featured-video cp-comedy-video">
          <div class="row">
            <div class="col-md-12 cp-heading-outer">

              <h2> <%= cat.title %> <%= (@category.title.match("Games") || @category.title.match("Movies") || "Channels").to_s if @category %> </h2>

              <ul class="cp-listed">
                  <li class="view-all"><a href="/categories/<%= cat.number %>">View All</a>
                  </li>
              </ul>
            </div>
          </div>
          <div class="<%= is_game ? 'categories-list' : 'videos-list' %>">
            <div class="uk-slidenav-position" data-uk-slider="{infinite: false, slideItems: <%= slide_item_number %>}">
              <div class="uk-slider-container" style="-webkit-overflow-scrolling: touch;">
                <ul class="uk-slider uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4">
                  <% cat.media.each do |m| %>
                    <li>
                      <div class="item"> 
                        <!-- Video Item Start-->
                        <div class="cp-video-item">
                          <figure class="cp-thumb">
                            <% m = m.becomes(Game) if is_game %>
                            <% if m.thumbnail_url.present? %>
                                  <% if @category.title.match("Movies") %>
                                    <img alt="" src="<%= m.thumbnail_url %>" class="makemetaller">
                                  <% else %>
                              <img alt="" src="<%= m.thumbnail_url %>">
                                  <% end %>
                            <% else %>
                              <img src="<%= asset_path('movie-placeholder.jpg') %>') %>">
                            <% end %>
                            <figcaption class="cp-caption">
                              <a href="/media/<%= m.number %>" class="play-video">Play</a>
                            </figcaption>
                          </figure>

                        </div>
                        <!-- Video Item End--> 
                      </div>
                    </li>
                  <% end %>
                </ul>
              </div>
              <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-previous" data-uk-slider-item="previous"></a>
              <a href="" class="uk-slidenav uk-slidenav-contrast uk-slidenav-next" data-uk-slider-item="next"></a>
            </div>
          </div>
        </div>
    <% end %>
    <!--Outer Holder End-->
    <% if @media.size > 0 %>

      <div class="cp-featured-block m60 cp-comedy-video">
          <div class="row">
              <div class="col-md-12 cp-heading-outer">
                  <h2>All <%= @category.title %></h2>
                  <ul class="cp-listed">
                      <li class="view-all"><a href="#">View All:</a>
                      </li>
                  </ul>
              </div>
              <div class="col-md-12 featured-blocks categories-list">
                <% @media.each do |m| %>
                  <div class="single-category-block">
                      <figure class="cp-thumb">
                        <% if m.thumbnail_url.present? %>
                          <% if @category.title.match("Movies") %>
                            <img alt="" src="<%= m.thumbnail_url %>" class="makemetaller">
                          <% else %>
                          <img alt="" src="<%= m.thumbnail_url %>">
                          <% end %>
                        <% else %>
                          <img src="<%= asset_path('movie-placeholder.jpg') %>">
                        <% end %>
                        <figcaption class="cp-caption">
                          <a class="play-video" href="/media/<%= m.number %>">Play</a>
                        <% if !m.category_name.match("Events") %>
                          <div class="cp-text">

                              <h4><%= m.title %></h4>
                            <!--Add features later<ul class="cp-meta-list">
                                <li>Feb 26, 2016</li>
                                <li>by Jiana Smith, <span>19 Views</span>
                                </li>
                            </ul>-->
                            </div>
                            <% end %>
                        </figcaption>
                      </figure>
                  </div>
                <% end %>
              </div>
          </div>
      </div>
      <% if @media.size >= MPX::RemoteResource::PER_PAGE || params[:page].to_i > 1 %>
        <div class="row">
          <div class="col-md-12">
            <% if params[:page].to_i >= 2 %>
              <a class="btn btn-sm btn-primary" href="?page=<%= params[:page].to_i - 1 %>">
               Prev page
              </a>
            <% end %>
            <div style="float:right">
              <a class="btn btn-sm btn-primary" href="?page=<%= (params[:page] || 1).to_i + 1 %>"> Next page</a>
            </div>
          </div>

      <% if @category.categories.size > 0%>
        <%= render :partial => 'media_slider'%>
      <% else %>
        <%= render :partial => 'all_media'%>

      <% end %>
    <% end %>
</div>